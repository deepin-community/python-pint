From 4b6db6cb85de46e151284d3bc08c092e99c60359 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ond=C5=99ej=20Nov=C3=BD?= <novy@ondrej.org>
Date: Fri, 4 Aug 2017 17:05:45 +0200
Subject: Use SOURCE_DATE_EPOCH for copyright year to make build reproducible

Forwarded: not-needed
Last-Update: 2016-04-23
---
 docs/conf.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

--- a/docs/conf.py
+++ b/docs/conf.py
@@ -12,6 +12,7 @@
 # serve to show the default.
 
 import datetime
+import os
 
 try:
     from importlib.metadata import version
@@ -70,7 +71,10 @@
     version = "unknown"
 
 release = version
-this_year = datetime.date.today().year
+if 'SOURCE_DATE_EPOCH' in os.environ:
+    this_year = datetime.datetime.utcfromtimestamp(float(os.environ['SOURCE_DATE_EPOCH'])).year
+else:
+    this_year = datetime.date.today().year
 copyright = "%s, %s" % (this_year, author)
 
 # The language for content autogenerated by Sphinx. Refer to documentation
